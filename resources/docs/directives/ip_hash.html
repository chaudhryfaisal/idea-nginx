<h2><span class="mw-headline" id="ip_hash"> ip_hash </span></h2>
<table cellspacing="0">
                <tr>
                <th>
            Syntax:
                </th>
                <td>
            <code><strong>ip_hash</strong>;</code><br>
                </td>
                </tr>
            
                <tr>
                <th>
            Default:
                </th>
                <td>
            
            â€”
        
                </td>
                </tr>
            
                <tr>
                <th>
            Context:
                </th>
                <td>
            <code>upstream</code><br>
                </td>
                </tr>
            </table></div><p>
Specifies that a group should use a load balancing method where requests
are distributed between servers based on client IP addresses.
The first three octets of the client IPv4 address, or the entire IPv6 address,
are used as a hashing key.
The method ensures that requests from the same client will always be
passed to the same server except when this server is unavailable.
In the latter case client requests will be passed to another server.
Most probably, it will always be the same server as well.
</p> <blockquote class="note">
IPv6 addresses are supported starting from versions 1.3.2 and 1.2.2.
</blockquote><p> 
</p><p>
If one of the servers needs to be temporarily removed, it should
be marked with the <code>down</code> parameter in
order to preserve the current hashing of client IP addresses.
</p><p>
Example:
</p> <blockquote class="example"><pre>
upstream backend {
    ip_hash;
    server backend1.example.com;
    server backend2.example.com;
    server backend3.example.com <strong>down</strong>;
    server backend4.example.com;
}
</pre></blockquote><p> 
</p><p>
</p> <blockquote class="note">
Until versions 1.3.1 and 1.2.2, it was not possible to specify a weight for
servers using the <code>ip_hash</code> load balancing method.
</blockquote><p> 
</p><a name="keepalive"></a>

<span>[<a href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html#ip_hash">ip_hash</a>]</span>
