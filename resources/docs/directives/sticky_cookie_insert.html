<h2><span class="mw-headline" id="sticky_cookie_insert"> sticky_cookie_insert </span></h2>
<table cellspacing="0">
                <tr>
                <th>
            Syntax:
                </th>
                <td>
            <code><strong>sticky_cookie_insert</strong> <code><i>name</i></code>
[<code>expires=</code><code><i>time</i></code>]
[<code>domain=</code><code><i>domain</i></code>]
[<code>path=</code><code><i>path</i></code>];</code><br>
                </td>
                </tr>
            
                <tr>
                <th>
            Default:
                </th>
                <td>
            
            —
        
                </td>
                </tr>
            
                <tr>
                <th>
            Context:
                </th>
                <td>
            <code>upstream</code><br>
                </td>
                </tr>
            </table></div><p>
This directive is obsolete since version 1.5.7.
An equivalent
<a href="#sticky">sticky</a> directive with a new syntax should be used instead:
</p> <blockquote class="note">
<code>sticky cookie</code> <code><i>name</i></code>
[<code>expires=</code><code><i>time</i></code>]
[<code>domain=</code><code><i>domain</i></code>]
[<code>path=</code><code><i>path</i></code>];
</blockquote><p> 
</p>
<a name="variables"></a><center><h4>Embedded Variables</h4></center><p>
The <code>ngx_http_upstream_module</code> module
supports the following embedded variables:
</p> <dl class="compact">
<dt id="var_upstream_addr"><code>$upstream_addr</code></dt>
<dd>
keeps the IP address and port,
or the path to the UNIX-domain socket of the upstream server.
If several servers were contacted during request processing,
their addresses are separated by commas, e.g.
“<code>192.168.1.1:80, 192.168.1.2:80, unix:/tmp/sock</code>”.
If an internal redirect from one server group to another happens,
initiated by
“X-Accel-Redirect” or
<a href="ngx_http_core_module.html#error_page">error_page</a>,
then the server addresses from different groups are separated by colons, e.g.
“<code>192.168.1.1:80, 192.168.1.2:80, unix:/tmp/sock : 192.168.10.1:80, 192.168.10.2:80</code>”.
If a server cannot be selected,
the variable keeps the name of the server group.
</dd>
<dt id="var_upstream_bytes_received"><code>$upstream_bytes_received</code></dt>
<dd>
number of bytes received from an upstream server (1.11.4).
Values from several connections
are separated by commas and colons like addresses in the
<a href="#var_upstream_addr">$upstream_addr</a> variable.
</dd>
<dt id="var_upstream_bytes_sent"><code>$upstream_bytes_sent</code></dt>
<dd>
number of bytes sent to an upstream server (1.15.8).
Values from several connections
are separated by commas and colons like addresses in the
<a href="#var_upstream_addr">$upstream_addr</a> variable.
</dd>
<dt id="var_upstream_cache_status"><code>$upstream_cache_status</code>
</dt>
<dd>
keeps the status of accessing a response cache (0.8.3).
The status can be either “<code>MISS</code>”,
“<code>BYPASS</code>”, “<code>EXPIRED</code>”,
“<code>STALE</code>”, “<code>UPDATING</code>”,
“<code>REVALIDATED</code>”, or “<code>HIT</code>”.
</dd>
<dt id="var_upstream_connect_time"><code>$upstream_connect_time</code>
</dt>
<dd>
keeps time spent on establishing a connection with the upstream server (1.9.1);
the time is kept in seconds with millisecond resolution.
In case of SSL, includes time spent on handshake.
Times of several connections
are separated by commas and colons like addresses in the
<a href="#var_upstream_addr">$upstream_addr</a> variable.
</dd>
<dt id="var_upstream_cookie_"><code>$upstream_cookie_</code><code><i>name</i></code>
</dt>
<dd>
cookie with the specified <code><i>name</i></code> sent by the upstream server
in the “Set-Cookie” response header field (1.7.1).
Only the cookies from the response of the last server are saved.
</dd>
<dt id="var_upstream_header_time"><code>$upstream_header_time</code>
</dt>
<dd>
keeps time
spent on receiving the response header from the upstream server (1.7.10);
the time is kept in seconds with millisecond resolution.
Times of several responses
are separated by commas and colons like addresses in the
<a href="#var_upstream_addr">$upstream_addr</a> variable.
</dd>
<dt id="var_upstream_http_"><code>$upstream_http_</code><code><i>name</i></code></dt>
<dd>
keep server response header fields.
For example, the “Server” response header field
is available through the <code>$upstream_http_server</code> variable.
The rules of converting header field names to variable names are the same
as for the variables that start with the
“<a href="ngx_http_core_module.html#var_http_">$http_</a>” prefix.
Only the header fields from the response of the last server are saved.
</dd>
<dt id="var_upstream_queue_time"><code>$upstream_queue_time</code></dt>
<dd>
keeps time the request spent in the upstream <a href="#queue">queue</a>
(1.13.9);
the time is kept in seconds with millisecond resolution.
Times of several responses
are separated by commas and colons like addresses in the
<a href="#var_upstream_addr">$upstream_addr</a> variable.
</dd>
<dt id="var_upstream_response_length"><code>$upstream_response_length</code>
</dt>
<dd>
keeps the length of the response obtained from the upstream server (0.7.27);
the length is kept in bytes.
Lengths of several responses
are separated by commas and colons like addresses in the
<a href="#var_upstream_addr">$upstream_addr</a> variable.
</dd>
<dt id="var_upstream_response_time"><code>$upstream_response_time</code>
</dt>
<dd>
keeps time spent on receiving the response from the upstream server;
the time is kept in seconds with millisecond resolution.
Times of several responses
are separated by commas and colons like addresses in the
<a href="#var_upstream_addr">$upstream_addr</a> variable.
</dd>
<dt id="var_upstream_status"><code>$upstream_status</code></dt>
<dd>
keeps status code of the response obtained from the upstream server.
Status codes of several responses
are separated by commas and colons like addresses in the
<a href="#var_upstream_addr">$upstream_addr</a> variable.
If a server cannot be selected,
the variable keeps the 502 (Bad Gateway) status code.
</dd>
<dt id="var_upstream_trailer_"><code>$upstream_trailer_</code><code><i>name</i></code></dt>
<dd>
keeps fields from the end of the response
obtained from the upstream server (1.13.10).
</dd>
</dl><p> 
</p>
</div></div></body></html>


<span>[<a href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html#sticky_cookie_insert">sticky_cookie_insert</a>]</span>
