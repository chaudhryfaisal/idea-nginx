<h2><span class="mw-headline" id="proxy_cache_use_stale"> proxy_cache_use_stale </span></h2>
<table cellspacing="0">
                <tr>
                <th>
            Syntax:
                </th>
                <td>
            <code><strong>proxy_cache_use_stale</strong> 
    <code>error</code> |
    <code>timeout</code> |
    <code>invalid_header</code> |
    <code>updating</code> |
    <code>http_500</code> |
    <code>http_502</code> |
    <code>http_503</code> |
    <code>http_504</code> |
    <code>http_403</code> |
    <code>http_404</code> |
    <code>http_429</code> |
    <code>off</code>
    ...;</code><br>
                </td>
                </tr>
            
                <tr>
                <th>
            Default:
                </th>
                <td>
            <pre>proxy_cache_use_stale off;</pre>
                </td>
                </tr>
            
                <tr>
                <th>
            Context:
                </th>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Determines in which cases a stale cached response can be used
during communication with the proxied server.
The directive’s parameters match the parameters of the
<a href="#proxy_next_upstream">proxy_next_upstream</a> directive.
</p><p>
The <code>error</code> parameter also permits
using a stale cached response if a proxied server to process a request
cannot be selected.
</p><a name="proxy_cache_use_stale_updating"></a><p>
Additionally, the <code>updating</code> parameter permits
using a stale cached response if it is currently being updated.
This allows minimizing the number of accesses to proxied servers
when updating cached data.
</p><p>
Using a stale cached response
can also be enabled directly in the response header
for a specified number of seconds after the response became stale (1.11.10).
This has lower priority than using the directive parameters.
</p> <ul>
<li>
The
“<a href="https://tools.ietf.org/html/rfc5861#section-3">stale-while-revalidate</a>”
extension of the “Cache-Control” header field permits
using a stale cached response if it is currently being updated.
</li>
<li>
The
“<a href="https://tools.ietf.org/html/rfc5861#section-4">stale-if-error</a>”
extension of the “Cache-Control” header field permits
using a stale cached response in case of an error.
</li>
</ul><p> 
</p><p>
To minimize the number of accesses to proxied servers when
populating a new cache element, the <a href="#proxy_cache_lock">proxy_cache_lock</a>
directive can be used.
</p><a name="proxy_cache_valid"></a>

<span>[<a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_use_stale">proxy_cache_use_stale</a>]</span>
