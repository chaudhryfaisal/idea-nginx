<h2><span class="mw-headline" id="limit_conn_zone"> limit_conn_zone </span></h2>
<table cellspacing="0">
                <tr>
                <th>
            Syntax:
                </th>
                <td>
            <code><strong>limit_conn_zone</strong> 
    <code><i>key</i></code>
    <code>zone</code>=<code><i>name</i></code>:<code><i>size</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <th>
            Default:
                </th>
                <td>
            
            â€”
        
                </td>
                </tr>
            
                <tr>
                <th>
            Context:
                </th>
                <td>
            <code>stream</code><br>
                </td>
                </tr>
            </table></div><p>
Sets parameters for a shared memory zone
that will keep states for various keys.
In particular, the state includes the current number of connections.
The <code><i>key</i></code> can contain text, variables,
and their combinations (1.11.2).
Connections with an empty key value are not accounted.
Usage example:
</p> <blockquote class="example"><pre>
limit_conn_zone $binary_remote_addr zone=addr:10m;
</pre></blockquote><p> 
Here, the key is a client IP address set by the
<code>$binary_remote_addr</code> variable.
The size of <code>$binary_remote_addr</code>
is 4 bytes for IPv4 addresses or 16 bytes for IPv6 addresses.
The stored state always occupies 32 or 64 bytes
on 32-bit platforms and 64 bytes on 64-bit platforms.
One megabyte zone can keep about 32 thousand 32-byte states
or about 16 thousand 64-byte states.
If the zone storage is exhausted, the server will close the connection.
</p><p>
</p> <blockquote class="note">
Additionally, as part of our
<a href="http://nginx.com/products/">commercial subscription</a>,
the
<a href="../http/ngx_http_api_module.html#stream_limit_conns_">status information</a>
for each such shared memory zone can be
<a href="../http/ngx_http_api_module.html#getStreamLimitConnZone">obtained</a> or
<a href="../http/ngx_http_api_module.html#deleteStreamLimitConnZoneStat">reset</a>
with the <a href="../http/ngx_http_api_module.html">API</a> since 1.17.7.
</blockquote><p> 
</p>
<a name="variables"></a><center><h4>Embedded Variables</h4></center><p>
</p> <dl class="compact">
<dt id="var_limit_conn_status"><code>$limit_conn_status</code></dt>
<dd>
keeps the result of limiting the number of connections (1.17.6):
<code>PASSED</code>,
<code>REJECTED</code>, or
<code>REJECTED_DRY_RUN</code>
</dd>
</dl><p> 
</p>
</div></div></body></html>


<span>[<a href="http://nginx.org/en/docs/stream/ngx_stream_limit_conn_module.html#limit_conn_zone">limit_conn_zone</a>]</span>
