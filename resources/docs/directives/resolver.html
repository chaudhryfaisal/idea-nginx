<h2><span class="mw-headline" id="resolver"> resolver </span></h2>
<table cellspacing="0">
                <tr>
                <th>
            Syntax:
                </th>
                <td>
            <code><strong>resolver</strong> 
    <code><i>address</i></code> ...
    [<code>valid</code>=<code><i>time</i></code>]
    [<code>ipv6</code>=<code>on</code>|<code>off</code>]
    [<code>status_zone</code>=<code><i>zone</i></code>];</code><br>
                </td>
                </tr>
            
                <tr>
                <th>
            Default:
                </th>
                <td>
            
            â€”
        
                </td>
                </tr>
            
                <tr>
                <th>
            Context:
                </th>
                <td>
            <code>upstream</code><br>
                </td>
                </tr>
            </table><p>This directive appeared in version 1.17.5.
            </p></div><p>
Configures name servers used to resolve names of upstream servers
into addresses, for example:
</p> <blockquote class="example"><pre>
resolver 127.0.0.1 [::1]:5353;
</pre></blockquote><p> 
The address can be specified as a domain name or IP address,
with an optional port.
If port is not specified, the port 53 is used.
Name servers are queried in a round-robin fashion.
</p><a name="resolver_ipv6"></a><p>
By default, nginx will look up both IPv4 and IPv6 addresses while resolving.
If looking up of IPv6 addresses is not desired,
the <code>ipv6=off</code> parameter can be specified.
</p><a name="resolver_valid"></a><p>
By default, nginx caches answers using the TTL value of a response.
The optional <code>valid</code> parameter allows overriding it:
</p> <blockquote class="example"><pre>
resolver 127.0.0.1 [::1]:5353 valid=30s;
</pre></blockquote><p> 
</p> <blockquote class="note">
To prevent DNS spoofing, it is recommended
configuring DNS servers in a properly secured trusted local network.
</blockquote><p> 
</p><a name="resolver_status_zone"></a><p>
The optional <code>status_zone</code> parameter
enables
<a href="../http/ngx_http_api_module.html#resolvers_">collection</a>
of DNS server statistics of requests and responses
in the specified <code><i>zone</i></code>.
</p><p>
</p> <blockquote class="note">
This directive is available as part of our
<a href="http://nginx.com/products/">commercial subscription</a>.
</blockquote><p> 
</p><a name="resolver_timeout"></a>

<span>[<a href="http://nginx.org/en/docs/stream/ngx_stream_upstream_module.html#resolver">resolver</a>]</span>
